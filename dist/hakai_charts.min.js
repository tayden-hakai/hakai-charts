!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.hakaiCharts=t()}}(function(){return function t(n,r,e){function a(o,c){if(!r[o]){if(!n[o]){var l="function"==typeof require&&require;if(!c&&l)return l(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var s=r[o]={exports:{}};n[o][0].call(s.exports,function(t){var r=n[o][1][t];return a(r?r:t)},s,s.exports,t,n,r,e)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<e.length;o++)a(e[o]);return a}({1:[function(t,n,r){"use strict";n.exports={parallelCoordinates:t("./js/parallel_coordinates"),scatterplot:t("./js/scatterplot")}},{"./js/parallel_coordinates":2,"./js/scatterplot":3}],2:[function(t,n,r){"use strict";n.exports=function(t){function n(){p=d3.select(t).append("svg").attr("width",s+f.left+f.right).attr("height",d+f.top+f.bottom).append("g").attr("transform","translate("+f.left+","+f.top+")"),y.forEach(function(t){b[t.name]=(t.scale||d3.scale.linear()).domain(d3.extent(t.data)).range([d,0])}),x=y.map(function(t){return t.name}),g=d3.scale.ordinal().domain(x).rangePoints([0,s],1),h=p.append("g").attr("class","background").selectAll("path").data(v).enter().append("path").attr("d",r),m=p.append("g").attr("class","foreground").selectAll("path").data(v).enter().append("path").attr("d",r);var n=p.selectAll(".dimension").data(x).enter().append("g").attr("class","dimension").attr("transform",function(t){return"translate("+g(t)+")"}).call(d3.behavior.drag().origin(function(t){return{x:g(t)}}).on("dragstart",function(t){w[t]=g(t),h.attr("visibility","hidden")}).on("drag",function(t){w[t]=Math.min(s,Math.max(0,d3.event.x)),m.attr("d",r),x.sort(function(t,n){return e(t)-e(n)}),g.domain(x),n.attr("transform",function(t){return"translate("+e(t)+")"})}).on("dragend",function(t){delete w[t],c(d3.select(this)).attr("transform","translate("+g(t)+")"),c(m).attr("d",r),h.attr("d",r).transition().delay(500).duration(0).attr("visibility",null)}));n.append("g").attr("class","axis").each(function(t){d3.select(this).call(A.scale(b[t]))}).on("click",i).append("text").style("text-anchor","middle").attr("y",-9).text(function(t){return t}),n.append("g").attr("class","brush").each(function(t){d3.select(this).call(b[t].brush=d3.svg.brush().y(b[t]).on("brushstart",l).on("brush",u))}).selectAll("rect").attr("x",-8).attr("width",16),i(x[0])}function r(t){return k(x.map(function(n){return[e(n),b[n](t[n])]}))}function e(t){var n=w[t];return n?n:g(t)}function a(t){var n=[];return t[0].data.forEach(function(t,r){n[r]={}}),t.forEach(function(t){n.forEach(function(n,r){n[t.name]=t.data[r]})}),n}function i(t){p.selectAll(".dimension").style("font-weight","normal").classed("z-scored",!1).filter(function(n){return n===t}).style("font-weight","bold").classed("z-scored",!0);var n=o(v.map(function(n){return parseFloat(n[t])}));p.select(".foreground").selectAll("path").style("stroke",function(r){return L(n(r[t]))})}function o(t){var n=d3.mean(t),r=d3.deviation(t);return function(t){return r?(t-n)/r:0}}function c(t){return t.transition().duration(500)}function l(){d3.event.sourceEvent.stopPropagation()}function u(){var t=x.filter(function(t){return!b[t].brush.empty()}),n=t.map(function(t){return b[t].brush.extent()});m.style("display",function(r){return t.every(function(t,e){var a=Math.round(100*r[t])/100;return Math.round(100*n[e][0])/100<=a&&a<=Math.round(100*n[e][1])/100})?null:"none"})}var s,d,f,p,g,h,m,x,y,v,b={},w={},k=d3.svg.line(),A=d3.svg.axis().orient("left"),L=d3.scale.linear().domain([-2,-.5,.5,2]).range(["#f46d43","#74add1","#74add1","#66bd63"]).interpolate(d3.interpolateLab);return n.render=function(){return this.call(),n},n.redraw=function(){return c(h).style("opacity",0).transition().remove(),c(m).style("opacity",0).transition().remove(),y.forEach(function(t){var n=d3.extent(t.data);n[0]===n[1]&&(n[0]-=n[0]/2,n[1]+=n[1]/2),b[t.name].domain(n)}),p.selectAll(".axis").each(function(t){c(d3.select(this)).delay(500).call(A.scale(b[t]))}),h=p.select(".background").selectAll("path").data(v),m=p.select(".foreground").selectAll("path").data(v),h.style("opacity",0).attr("d",r),m.style("opacity",0).attr("d",r),h.enter().append("path").style("opacity",0).attr("d",r),m.enter().append("path").style("opacity",0).attr("d",r),i(d3.select(".z-scored").data()[0]),c(h).delay(1e3).style("opacity",.5),c(m).delay(1e3).style("opacity",.5),n},n.width=function(t){return arguments.length?(s=t,n):s},n.height=function(t){return arguments.length?(d=t,n):d},n.margin=function(t){return arguments.length?(f=t,n):f},n.data=function(t){return arguments.length?(y=t,v=a(y),n):y},n}},{}],3:[function(t,n,r){"use strict";n.exports=function(t){function n(){m=d3.select(t).append("svg").attr("width",i+c.left+c.right).attr("height",o+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")");var n=l.filter(function(t){return!(isNaN(d(t))||isNaN(f(t)))}).filter(function(t){return!(v&&0===d(t)||b&&0===f(t))});x.domain(d3.extent(n,d)).range([0,i]),y.domain(d3.extent(n,f)).range([o,0]),u=d3.svg.axis().scale(x).orient("bottom").tickSize(-o),s=d3.svg.axis().scale(y).orient("left").tickSize(-i),m.append("g").attr("class","x axis").attr("transform","translate(0, "+o+")").call(u),m.append("g").attr("class","y axis").call(s),m.append("text").attr("class","x label").attr("text-anchor","end").attr("x",i-10).attr("y",o-5).text(p),m.append("text").attr("class","y label").attr("transform","rotate(-90)").attr("text-anchor","end").attr("x",-5).attr("y",10).text(g),m.append("rect").attr("class","frame").attr("width",i).attr("height",o),m.append("defs").append("clipPath").attr("id","chartClip").append("rect").attr("width",i).attr("height",o);var r=a(n);h=r.regLine,N=r.rSquared,q=r.correlation,M=r.covariance,m.append("g").attr("class","regression").attr("clip-path","url(#chartClip)").append("line").style("stroke","black").style("stroke-width","1").style("stroke-dasharray","5,5,10,5").attr("x1",x(x.domain()[0])).attr("y1",y(e(x.domain()[0],h))).attr("x2",x(x.domain()[1])).attr("y2",y(e(x.domain()[1],h)));var E=m.selectAll("g.mark").data(n).enter().append("g").attr("class","mark");E.append("circle").attr("cx",function(t){return x(d(t))}).attr("cy",function(t){return y(f(t))}).attr("r",L).attr("fill",function(t){return w(k(t))}),E.append("text").text(A).attr("x",function(t){return x(d(t))}).attr("y",function(t){return y(f(t))}).attr("text-anchor","end").attr("dy",-5).attr("dx",-2)}function r(t){return Math.log(t)/Math.log(10)}function e(t,n){var e=n(v?r(t):t);return b?Math.pow(10,e):e}function a(t){var n=t.map(function(t){var n=v?r(d(t)):d(t),e=b?r(f(t)):f(t);return[n,e]}),e=ss.linearRegression(n),a=ss.linearRegressionLine(e),i=ss.rSquared(n,a),o=ss.sampleCorrelation(n.map(function(t){return t[0]}),n.map(function(t){return t[1]})),c=ss.sampleCovariance(n.map(function(t){return t[0]}),n.map(function(t){return t[1]}));return{reg:e,regLine:a,rSquared:i,correlation:o,covariance:c}}var i,o,c,l,u,s,d,f,p,g,h,m,x=d3.scale.linear(),y=d3.scale.linear(),v=!1,b=!1,w=d3.scale.category10(),k=function(){return 0},A=function(t){return t.key},L=5,N=1,q=1,M=1;return n.render=function(){return this.call(),n},n.redraw=function(){var t=l.filter(function(t){return!(isNaN(d(t))||isNaN(f(t)))}).filter(function(t){return!(v&&0===d(t)||b&&0===f(t))});x.domain(d3.extent(t,d)).range([0,i]),y.domain(d3.extent(t,f)).range([o,0]),u.scale(x),s.scale(y);var r=1500;m.select(".x.axis").transition().duration(r).call(u),m.select(".y.axis").transition().duration(r).call(s),m.select(".x.label").text(p),m.select(".y.label").text(g);var c=a(t);h=c.regLine,N=c.rSquared,q=c.correlation,M=c.covariance,m.select(".regression line").transition().duration(r).attr("x1",x(x.domain()[0])).attr("y1",y(e(x.domain()[0],h))).attr("x2",x(x.domain()[1])).attr("y2",y(e(x.domain()[1],h)));var E=m.selectAll("g.mark").data(t,A);E.selectAll("circle").transition().duration(r).attr("cx",function(t){return x(d(t))}).attr("cy",function(t){return y(f(t))}).attr("r",L).attr("fill",function(t){return w(k(t))}),E.selectAll("text").transition().duration(r).attr("x",function(t){return x(d(t))}).attr("y",function(t){return y(f(t))});var C=E.enter().append("g").attr("class","mark");return C.append("circle").attr("cx",function(t){return x(d(t))}).attr("cy",function(t){return y(f(t))}).attr("r",L).attr("fill",function(t){return w(k(t))}),C.append("text").text(A).attr("x",function(t){return x(d(t))}).attr("y",function(t){return y(f(t))}).attr("text-anchor","end").attr("dy",-5).attr("dx",-2),E.exit().remove(),n},n.width=function(t){return arguments.length?(i=t,n):i},n.height=function(t){return arguments.length?(o=t,n):o},n.margin=function(t){return arguments.length?(c=t,n):c},n.data=function(t){return arguments.length?(l=t,n):l},n.xAccessor=function(t){return arguments.length?(d=t,n):d},n.yAccessor=function(t){return arguments.length?(f=t,n):f},n.xLabel=function(t){return arguments.length?(p=t,n):p},n.yLabel=function(t){return arguments.length?(g=t,n):g},n.xLog=function(t){return arguments.length?(v=t,x=v?d3.scale.log():d3.scale.linear(),n):v},n.yLog=function(t){return arguments.length?(b=t,y=b?d3.scale.log():d3.scale.linear(),n):b},n.color=function(t){return arguments.length?(w=t,n):w},n.colorAccessor=function(t){return arguments.length?(k=t,n):k},n.keyAccessor=function(t){return arguments.length?(A=t,n):A},n.radius=function(t){return arguments.length?(L=t,n):L},n.rSquared=function(){return N},n.correlation=function(){return q},n.covariance=function(){return M},n}},{}]},{},[1])(1)});
