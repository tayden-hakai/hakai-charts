!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.hakaiCharts=t()}}(function(){return function t(n,r,e){function a(o,c){if(!r[o]){if(!n[o]){var l="function"==typeof require&&require;if(!c&&l)return l(o,!0);if(i)return i(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var u=r[o]={exports:{}};n[o][0].call(u.exports,function(t){var r=n[o][1][t];return a(r?r:t)},u,u.exports,t,n,r,e)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<e.length;o++)a(e[o]);return a}({1:[function(t,n,r){"use strict";n.exports={parallelCoordinates:t("./src/js/parallel_coordinates"),scatterplot:t("./src/js/scatterplot")}},{"./src/js/parallel_coordinates":2,"./src/js/scatterplot":3}],2:[function(t,n,r){"use strict";n.exports=function(t){function n(t){var n=d[t];return n?n:y(t)}function r(t){return f(k.map(function(r){return[n(r),u[r](t[r])]}))}function e(t){var n=[];return t[0].data.forEach(function(t,r){return n[r]={}}),t.forEach(function(t){n.forEach(function(r,e){n[e][t.name]=t.data[e]})}),n}function a(t){var n=d3.mean(t),r=d3.deviation(t);return function(t){return r?(t-n)/r:0}}function i(t){x.selectAll(".dimension").style("font-weight","normal").classed("z-scored",!1).filter(function(n){return n===t}).style("font-weight","bold").classed("z-scored",!0);var n=a(L.map(function(n){return parseFloat(n[t])}));x.select(".foreground").selectAll("path").style("stroke",function(r){return g(n(r[t]))})}function o(t){return t.transition().duration(500)}function c(){d3.event.sourceEvent.stopPropagation()}function l(){var t=k.filter(function(t){return!u[t].brush.empty()}),n=t.map(function(t){return u[t].brush.extent()});w.style("display",function(r){return t.every(function(t,e){var a=Math.round(100*r[t])/100;return Math.round(100*n[e][0])/100<=a&&a<=Math.round(100*n[e][1])/100})?null:"none"})}function s(){x=d3.select(t).append("svg").attr("width",h+v.left+v.right).attr("height",m+v.top+v.bottom).append("g").attr("transform","translate("+v.left+","+v.top+")"),A.forEach(function(t){u[t.name]=(t.scale||d3.scale.linear()).domain(d3.extent(t.data)).range([m,0])}),k=A.map(function(t){return t.name}),y=d3.scale.ordinal().domain(k).rangePoints([0,h],1),b=x.append("g").attr("class","background").selectAll("path").data(L).enter().append("path").attr("d",r),w=x.append("g").attr("class","foreground").selectAll("path").data(L).enter().append("path").attr("d",r);var e=x.selectAll(".dimension").data(k).enter().append("g").attr("class","dimension").attr("transform",function(t){return"translate("+y(t)+")"}).call(d3.behavior.drag().origin(function(t){return{x:y(t)}}).on("dragstart",function(t){d[t]=y(t),b.attr("visibility","hidden")}).on("drag",function(t){d[t]=Math.min(h,Math.max(0,d3.event.x)),w.attr("d",r),k.sort(function(t,r){return n(t)-n(r)}),y.domain(k),e.attr("transform",function(t){return"translate("+n(t)+")"})}).on("dragend",function(t){delete d[t],o(d3.select(this)).attr("transform","translate("+y(t)+")"),o(w).attr("d",r),b.attr("d",r).transition().delay(500).duration(0).attr("visibility",null)}));e.append("g").attr("class","axis").each(function(t){d3.select(this).call(p.scale(u[t]))}).on("click",i).append("text").style("text-anchor","middle").attr("y",-9).text(function(t){return t}),e.append("g").attr("class","brush").each(function(t){d3.select(this).call(u[t].brush=d3.svg.brush().y(u[t]).on("brushstart",c).on("brush",l))}).selectAll("rect").attr("x",-8).attr("width",16),i(k[0])}var u={},d={},f=d3.svg.line(),p=d3.svg.axis().orient("left"),g=d3.scale.linear().domain([-2,-.5,.5,2]).range(["#f46d43","#74add1","#74add1","#66bd63"]).interpolate(d3.interpolateLab),h=void 0,m=void 0,v=void 0,x=void 0,y=void 0,b=void 0,w=void 0,k=void 0,A=void 0,L=void 0;return s.render=function(){return this.call(),s},s.redraw=function(){return o(b).style("opacity",0).transition().remove(),o(w).style("opacity",0).transition().remove(),A.forEach(function(t){var n=d3.extent(t.data);n[0]===n[1]&&(n[0]-=n[0]/2,n[1]+=n[1]/2),u[t.name].domain(n)}),x.selectAll(".axis").each(function(t){o(d3.select(this)).delay(500).call(p.scale(u[t]))}),b=x.select(".background").selectAll("path").data(L),w=x.select(".foreground").selectAll("path").data(L),b.style("opacity",0).attr("d",r),w.style("opacity",0).attr("d",r),b.enter().append("path").style("opacity",0).attr("d",r),w.enter().append("path").style("opacity",0).attr("d",r),i(d3.select(".z-scored").data()[0]),o(b).delay(1e3).style("opacity",.5),o(w).delay(1e3).style("opacity",.5),s},s.width=function(t){return arguments.length?(h=t,s):h},s.height=function(t){return arguments.length?(m=t,s):m},s.margin=function(t){return arguments.length?(v=t,s):v},s.data=function(t){return arguments.length?(A=t,L=e(A),s):A},s}},{}],3:[function(t,n,r){"use strict";n.exports=function(t){function n(t){return Math.log(t)/Math.log(10)}function r(t,r){var e=r(d?n(t):t);return f?Math.pow(10,e):e}function e(t){var r=t.map(function(t){var r=d?n(h(t)):h(t),e=f?n(m(t)):m(t);return[r,e]}),e=ss.linearRegression(r),a=ss.linearRegressionLine(e),i=ss.rSquared(r,a),o=ss.sampleCorrelation(r.map(function(t){return t[0]}),r.map(function(t){return t[1]})),c=ss.sampleCovariance(r.map(function(t){return t[0]}),r.map(function(t){return t[1]}));return{reg:e,regLine:a,rSquared:i,correlation:o,covariance:c}}function a(){M=d3.select(t).append("svg").attr("width",i+c.left+c.right).attr("height",o+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")");var n=l.filter(function(t){return!(isNaN(h(t))||isNaN(m(t)))}).filter(function(t){return!(d&&0===h(t)||f&&0===m(t))});s.domain(d3.extent(n,h)).range([0,i]),u.domain(d3.extent(n,m)).range([o,0]),p=d3.svg.axis().scale(s).orient("bottom").tickSize(-o),g=d3.svg.axis().scale(u).orient("left").tickSize(-i),M.append("g").attr("class","x axis").attr("transform","translate(0, "+o+")").call(p),M.append("g").attr("class","y axis").call(g),M.append("text").attr("class","x label").attr("text-anchor","end").attr("x",i-10).attr("y",o-5).text(v),M.append("text").attr("class","y label").attr("transform","rotate(-90)").attr("text-anchor","end").attr("x",-5).attr("y",10).text(x),M.append("rect").attr("class","frame").attr("width",i).attr("height",o),M.append("defs").append("clipPath").attr("id","chartClip").append("rect").attr("width",i).attr("height",o);var a=e(n);A=a.regLine,L=a.rSquared,N=a.correlation,q=a.covariance,M.append("g").attr("class","regression").attr("clip-path","url(#chartClip)").append("line").style("stroke","black").style("stroke-width","1").style("stroke-dasharray","5,5,10,5").attr("x1",s(s.domain()[0])).attr("y1",u(r(s.domain()[0],A))).attr("x2",s(s.domain()[1])).attr("y2",u(r(s.domain()[1],A)));var E=M.selectAll("g.mark").data(n).enter().append("g").attr("class","mark");E.append("circle").attr("cx",function(t){return s(h(t))}).attr("cy",function(t){return u(m(t))}).attr("r",k).attr("fill",function(t){return y(b(t))}),E.append("text").text(w).attr("x",function(t){return s(h(t))}).attr("y",function(t){return u(m(t))}).attr("text-anchor","end").attr("dy",-5).attr("dx",-2)}var i=void 0,o=void 0,c=void 0,l=void 0,s=d3.scale.linear(),u=d3.scale.linear(),d=!1,f=!1,p=void 0,g=void 0,h=void 0,m=void 0,v=void 0,x=void 0,y=d3.scale.category10(),b=function(){return 0},w=function(t){return t.key},k=5,A=void 0,L=1,N=1,q=1,M=void 0;return a.render=function(){return this.call(),a},a.redraw=function(){var t=l.filter(function(t){return!(isNaN(h(t))||isNaN(m(t)))}).filter(function(t){return!(d&&0===h(t)||f&&0===m(t))});s.domain(d3.extent(t,h)).range([0,i]),u.domain(d3.extent(t,m)).range([o,0]),p.scale(s),g.scale(u);var n=1500;M.select(".x.axis").transition().duration(n).call(p),M.select(".y.axis").transition().duration(n).call(g),M.select(".x.label").text(v),M.select(".y.label").text(x);var c=e(t);A=c.regLine,L=c.rSquared,N=c.correlation,q=c.covariance,M.select(".regression line").transition().duration(n).attr("x1",s(s.domain()[0])).attr("y1",u(r(s.domain()[0],A))).attr("x2",s(s.domain()[1])).attr("y2",u(r(s.domain()[1],A)));var E=M.selectAll("g.mark").data(t,w);E.selectAll("circle").transition().duration(n).attr("cx",function(t){return s(h(t))}).attr("cy",function(t){return u(m(t))}).attr("r",k).attr("fill",function(t){return y(b(t))}),E.selectAll("text").transition().duration(n).attr("x",function(t){return s(h(t))}).attr("y",function(t){return u(m(t))});var C=E.enter().append("g").attr("class","mark");return C.append("circle").attr("cx",function(t){return s(h(t))}).attr("cy",function(t){return u(m(t))}).attr("r",k).attr("fill",function(t){return y(b(t))}),C.append("text").text(w).attr("x",function(t){return s(h(t))}).attr("y",function(t){return u(m(t))}).attr("text-anchor","end").attr("dy",-5).attr("dx",-2),E.exit().remove(),a},a.width=function(t){return arguments.length?(i=t,a):i},a.height=function(t){return arguments.length?(o=t,a):o},a.margin=function(t){return arguments.length?(c=t,a):c},a.data=function(t){return arguments.length?(l=t,a):l},a.xAccessor=function(t){return arguments.length?(h=t,a):h},a.yAccessor=function(t){return arguments.length?(m=t,a):m},a.xLabel=function(t){return arguments.length?(v=t,a):v},a.yLabel=function(t){return arguments.length?(x=t,a):x},a.xLog=function(t){return arguments.length?(d=t,s=d?d3.scale.log():d3.scale.linear(),a):d},a.yLog=function(t){return arguments.length?(f=t,u=f?d3.scale.log():d3.scale.linear(),a):f},a.color=function(t){return arguments.length?(y=t,a):y},a.colorAccessor=function(t){return arguments.length?(b=t,a):b},a.keyAccessor=function(t){return arguments.length?(w=t,a):w},a.radius=function(t){return arguments.length?(k=t,a):k},a.rSquared=function(){return L},a.correlation=function(){return N},a.covariance=function(){return q},a}},{}]},{},[1])(1)});