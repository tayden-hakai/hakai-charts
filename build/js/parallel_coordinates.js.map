{"version":3,"sources":["js/parallel_coordinates.js"],"names":[],"mappings":"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","file":"js/parallel_coordinates.js","sourcesContent":["'use strict';\n/* global d3 */\n/* eslint-env browser */\n\n/**\n * A reusable d3 parallel coordinates generator with statistical coloring\n * @name parallelCoordinates\n * @author Taylor Denouden\n * @param {string} parent | {DOM element} parent - A dom element to append the vis to\n * @return {object} parallelCoordinates\n */\nmodule.exports = function(parent) {\n  var _width;\n  var _height;\n  var _margin;\n  var _svg;\n  var _x;\n  var _y = {};\n  var _dragging = {};\n  var _background;\n  var _foreground;\n  var _dimensions;\n  var _line = d3.svg.line();\n  var _axis = d3.svg.axis().orient('left');\n  var _color = d3.scale.linear()\n    .domain([-2, -0.5, 0.5, 2])\n    .range(['#f46d43', '#74add1', '#74add1', '#66bd63'])\n    .interpolate(d3.interpolateLab);\n  var _data;\n  var _lineData;\n\n  /**\n   * Generate the chart using private variables on call to chart.render()\n   * @returns {void}\n   */\n  function _chart() {\n    _svg = d3.select(parent).append('svg')\n        .attr('width', _width + _margin.left + _margin.right)\n        .attr('height', _height + _margin.top + _margin.bottom)\n      .append('g')\n        .attr('transform', 'translate(' + _margin.left + ',' + _margin.top + ')');\n\n    // Create a scale for each dimension\n    _data.forEach(function(d) {\n      _y[d.name] = (d.scale || d3.scale.linear())\n          .domain(d3.extent(d.data))\n          .range([_height, 0]);\n    });\n\n    // Extract the list of _dimensions\n    _dimensions = _data.map(function(d) { return d.name; });\n    _x = d3.scale.ordinal()\n        .domain(_dimensions)\n        .rangePoints([0, _width], 1);\n\n    // Add grey background lines for context.\n    _background = _svg.append('g')\n        .attr('class', 'background')\n      .selectAll('path')\n        .data(_lineData)\n      .enter().append('path')\n        .attr('d', path);\n\n    // Add blue foreground lines for focus.\n    _foreground = _svg.append('g')\n        .attr('class', 'foreground')\n      .selectAll('path')\n        .data(_lineData)\n      .enter().append('path')\n        .attr('d', path);\n\n    // Add a group element for each dimension.\n    var g = _svg.selectAll('.dimension')\n        .data(_dimensions)\n      .enter().append('g')\n        .attr('class', 'dimension')\n        .attr('transform', function(d) { return 'translate(' + _x(d) + ')'; })\n        .call(d3.behavior.drag()\n          .origin(function(d) { return {x: _x(d)}; })\n          .on('dragstart', function(d) {\n            _dragging[d] = _x(d);\n            _background.attr('visibility', 'hidden');\n          })\n          .on('drag', function(d) {\n            _dragging[d] = Math.min(_width, Math.max(0, d3.event.x));\n            _foreground.attr('d', path);\n            _dimensions.sort(function(a, b) { return position(a) - position(b); });\n            _x.domain(_dimensions);\n            g.attr('transform', function(b) { return 'translate(' + position(b) + ')'; });\n          })\n          .on('dragend', function(d) {\n            delete _dragging[d];\n            transition(d3.select(this)).attr('transform',\n                                             'translate(' + _x(d) + ')');\n            transition(_foreground).attr('d', path);\n            _background\n                .attr('d', path)\n              .transition()\n                .delay(500)\n                .duration(0)\n                .attr('visibility', null);\n          }));\n\n    // Add an axis and title.\n    g.append('g')\n        .attr('class', 'axis')\n        .each(function(d) { d3.select(this).call(_axis.scale(_y[d])); })\n        .on('click', changeColor)\n      .append('text')\n        .style('text-anchor', 'middle')\n        .attr('y', -9)\n        .text(function(d) { return d; });\n\n    // Add and store a brush for each axis.\n    g.append('g')\n        .attr('class', 'brush')\n        .each(function(d) {\n          d3.select(this).call(\n            _y[d].brush = d3.svg.brush()\n                .y(_y[d])\n                .on('brushstart', brushstart)\n                .on('brush', brush)\n          );\n        })\n      .selectAll('rect')\n        .attr('x', -8)\n        .attr('width', 16);\n\n    // Color _dimensions by z-score\n    changeColor(_dimensions[0]);\n  }\n\n  /**\n   * Generate the line path for a datum.\n   * @param {object} d - An object with axis attributes\n   * @return {string} - SVG path text\n   */\n  function path(d) {\n    return _line(_dimensions.map(function(p) {\n      return [position(p), _y[p](d[p])];\n    }));\n  }\n\n  /**\n   * Get the x axis position for some dimenstion and initialize dragging\n   * @param {string} d - The dimension name\n   * @return {float} - The distance to the right of the origin\n   */\n  function position(d) {\n    var v = _dragging[d];\n    return v ? v : _x(d);\n  }\n\n  /**\n   * Map a list of objects where each object is an attribute with line values to\n   *     a list of objects where each object is a line with its attributes listed\n   * @param {list} data - A list of objects\n   *      eg {\n   *        name: Area,\n   *        data: [14234, 34132],\n   *        scale : d3.scale.linear()\n   *      }\n   *\n   * @return {list} - A list of line objects\n   *      eg {\n   *        Area: 14234\n   *        Bird species: 67\n   *        Distance to Mainland: 14165.85749\n   *        Land within 500m: 2.60546\n   *      }\n   */\n  function dataToLines(data) {\n    var result = [];\n    data[0].data.forEach(function(d, i) { result[i] = {}; });\n    data.forEach(function(dim) {\n      result.forEach(function(line, i) {\n        line[dim.name] = dim.data[i];\n      });\n    });\n    return result;\n  }\n\n  /**\n   * Change foreground line color\n   * @param {string} dimension - The name of the dimension to change\n   * @returns {void}\n   */\n  function changeColor(dimension) {\n    _svg.selectAll('.dimension')\n        .style('font-weight', 'normal')\n        .classed('z-scored', false)\n      .filter(function(d) { return d === dimension; })\n        .style('font-weight', 'bold')\n        .classed('z-scored', true);\n    var z = zScore(_lineData.map(function(i) {\n      return parseFloat(i[dimension]);\n    }));\n\n    // lines\n    _svg.select('.foreground').selectAll('path')\n        .style('stroke', function(d) { return _color(z(d[dimension])); });\n  }\n\n  /**\n   * color by zScore\n   * @param {list} col - A list of values to generate a z-score function from\n   * @return {object} - A function that takes a value and returns it's z-score in relation to the values in col\n   */\n  function zScore(col) {\n    var mean = d3.mean(col);\n    var sigma = d3.deviation(col);\n    return function(d) {\n      // Return zScore if std_dev is not 0, else 0\n      return (sigma ? (d - mean) / sigma : 0);\n    };\n  }\n\n  /**\n   * Provide a consisten transition length\n   * @param {object} g - An d3 selection that can be transitioned\n   * @return {object} - A d3 transition object\n   */\n  function transition(g) {\n    return g.transition().duration(500);\n  }\n\n  /**\n   * A brushstart callback control\n   * @returns {void}\n   */\n  function brushstart() {\n    d3.event.sourceEvent.stopPropagation();\n  }\n\n  /**\n   * Handles a brush event, toggling the display of foreground lines.\n   * @returns {void}\n   */\n  function brush() {\n    var actives = _dimensions.filter(function(p) { return !_y[p].brush.empty(); });\n    var extents = actives.map(function(p) { return _y[p].brush.extent(); });\n    _foreground.style('display', function(d) {\n      return actives.every(function(p, i) {\n        var x = Math.round(d[p] * 100) / 100;\n        return Math.round(extents[i][0] * 100) / 100 <= x && x <= Math.round(extents[i][1] * 100) / 100;\n      }) ? null : 'none';\n    });\n  }\n\n  _chart.render = function() {\n    this.call();\n    return _chart;\n  };\n  _chart.redraw = function() {\n    //  Fade out and remove lines\n    transition(_background)\n        .style('opacity', 0)\n      .transition()\n        .remove();\n    transition(_foreground)\n        .style('opacity', 0)\n      .transition()\n        .remove();\n\n    // Adjust axes domains\n    _data.forEach(function(d) {\n      var extent = d3.extent(d.data);\n      if (extent[0] === extent[1]) {\n        extent[0] -= extent[0] / 2;\n        extent[1] += extent[1] / 2;\n      }\n      _y[d.name].domain(extent);\n    });\n\n    // Transition axes\n    _svg.selectAll('.axis')\n        .each(function(d) { transition(d3.select(this)).delay(500).call(_axis.scale(_y[d])); });\n\n    // Rebind data\n    _background = _svg.select('.background')\n        .selectAll('path')\n        .data(_lineData);\n    _foreground = _svg.select('.foreground')\n        .selectAll('path')\n        .data(_lineData);\n    // Update\n    _background\n        .style('opacity', 0)\n        .attr('d', path);\n    _foreground\n        .style('opacity', 0)\n        .attr('d', path);\n\n    // Enter\n    _background.enter().append('path')\n        .style('opacity', 0)\n        .attr('d', path);\n    _foreground.enter().append('path')\n        .style('opacity', 0)\n        .attr('d', path);\n\n    // Update color\n    changeColor(d3.select('.z-scored').data()[0]);\n\n    // Fade in lines\n    transition(_background).delay(1000)\n        .style('opacity', 0.5);\n    transition(_foreground).delay(1000)\n        .style('opacity', 0.5);\n\n    return _chart;\n  };\n\n  _chart.width = function(val) {\n    if (!arguments.length) { return _width; }\n    _width = val;\n    return _chart;\n  };\n  _chart.height = function(val) {\n    if (!arguments.length) { return _height; }\n    _height = val;\n    return _chart;\n  };\n  _chart.margin = function(val) {\n    if (!arguments.length) { return _margin; }\n    _margin = val;\n    return _chart;\n  };\n  _chart.data = function(val) {\n    if (!arguments.length) { return _data; }\n    _data = val;\n    _lineData = dataToLines(_data);\n    return _chart;\n  };\n\n  return _chart;\n};\n"],"sourceRoot":"/source/"}